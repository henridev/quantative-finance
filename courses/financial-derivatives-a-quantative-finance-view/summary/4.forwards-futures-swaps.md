# forwards, futures, swaps

## derivatives

> financial products / assets whose structure and value is derived from other assets. This base asset is called the **underlying asset** but is usually referred to as the **underlying**.

> an **underlying** and a derivate are usually through the payoffs. the payoff of a derivative will usually be determined by the price of the underlying asset, at some point in the derivative contract's life, often on its expiration date.

> **arbitrage** is the main tool to link the derivative value to the underlying price

- **cash price / spot price** = price of the underlying asset. Distinguish it from the price of the derivative.
- **cash market** = where the underlying assets are traded, when the underlying is a cash product which it usually  is.
- **P&L** = changes in value of an investment or financial position. This position can be a single asset or a portfolio

assumptions when treating derivatives:

- transaction costs are zero
- unlimited investing and borrowing at risk free rate
- no restrictions on short selling an asset

types of derivatives

- **forwards / futures** = contracts that lock in the price 2 parties will buy and sell an asset for at some future date 
- **option** = similar to forward but optional
- **swaps** = allow for swapping a floating with a fixed interest rate

### derivative markets

- OTC = bilateral deals between counterparties that deal directly with each other
  - between broker-dealers and clients
  - or between broker-dealers themselves
  - private and customizable
  - little price transparency
  - lightly regulated
  - higher counter party credit risk
- organized exchanges
  - products are standardized
  - more liquid than OTC
  - less change of counterparty credit risk
  - more transparent

> **counter party credit risk** =  risk that one of the parties on the contract might fail to meet their obligations

## forward contracts

agreement between seller and buyer in which they agree to sell/buy at a certain time in the future for a price agreed upon now.

- **long** = buyer, because for him the underlying price increase is good
- **short** = seller, because for him the underlying price decrease is good.
- **expiration data** = agreed transfer date
- **forward price** = contracted price

the traded asset is the underlying of the forward.

> when a forward is entered into, the forward price is not arbitrary instead it is calculated in such a way that the value of the forward contract upon entering it will be = 0
>
> the requirement that the forward contract has value 0 at origination ties the forward price to the current spot price, that is to the current market price of the asset



- forwards can be written on almost any asset at all.
- forward contracts are privately negotiated between counterparties, on OTC markets and can be highly customized to suit the two counterparties.
- usually one party is a financial institution / dealer while the other can be a non financial institution or another dealer. 
- the primary reasons for users to use forwards is risk management.

### settlement

- delivery = seller exchanges the underlying asset for the contracted price with the buyer
- cash settlement = the party in the negative position will pay this in cash the the party in the positive position

- usually these contracts are held to expiry and illiquid because they are custom
- counterparty credit risk is a serious concern
- the last two points are in contrast to **exchange traded future contracts**

## forward payoffs

revenues a particular counterparty earns from their position in the derivative contract as the derivatives payoff.

payments are only received after expiration.

at expiration the payoff equals the value of the forward contract for either position / party. The long / short payoff respectively.

all value of a forward contract derives from it's payoff at expiration.

### forward contract notation

$S(t)$ = price of underlying asset at time $t$

$K_{\tau}$ = forward price for expiry $\tau$

$T$ = expiration date

$r$ = risk free rate

$V(t)$ = value of long forward position at time $t$

we start by considering:

â€‹	$V(T)$ = long forward payoff

 which cashflows does the long receive and pay at expiration of the forward contract. 

- $+S(T)$ = price of underlying at expiration, cash flow in essence but in reality the actual asset (can be sold)
- $-K_{T}$ = forward price set in the contract
- in total this means $\color{red}{V(t) = S(T) - K(T)} =$ payoff for long
- the payoff for the short is just the opposite $\color{red}{-V(T)=K(T)-S(T)}$ 

<img src="..\images\Screenshot 2023-05-01 164452.png" alt="cash flow" style="zoom: 33%;" />

<img src="..\images\idBycIgWxJ-11.png" alt="payoff graph" style="zoom:53%;" />

## pricing forward contracts

If we want to apply the law of one price to value the long position.

We need to construct a portfolio that replicates this. and that will represent the forward payoff at time $t=T$.

$S(T)-K_{T}$

$S(T)$ corresponds to holding the underlying asset. Holding the asset in our portfolio will replicate this

$- K_{T}$ corresponds to a payment (a debt). The discounted absolute value of this would be $e^{-r_cT}K_{T}$

> in short: we can replicate the portfolio using
> - a long position in the underlying asset
> - a debt of $e^{-r_cT}K_{T}$ entered at time $t=0$

such a portfolio will have value:

$V(t) = S(t) - e^{r_{c}t}e^{-r_{c}T}K_{T} = S(t) - e^{-r_{c}(T-t)}K_{T}$

we check if this is a replicating portfolio by evaluating $V(T)$

$V(t) = S(t) - e^{-r_{c}(T-T)}K_{T}$

$V(t) = S(t) - e^{0}K_{T}$

$V(t) = S(t) - K_{T}$

this is the forward payoff thus this must be a replicating portfolio.

> the law of one price states: The value of the forward contract at any time $t<T$ must be $V(t)$ the value of the replicating portfolio. 
> - long position: $\color{red}{V(t) = S(T) - e^{r_{c}(T-t)}K(T)}$
> - short position: $\color{red}{-V(t) = e^{r_{c}(T-t)}K(T) - S(T)}$
>  
> more specificaly value today should be $V(0) = 0$. The forward price $K_{T}$ is set so that the value of the forward contract today is 0.
>
> $V(0) = 0$
>
> $V(0) = S(0) - e^{-r_{c}(T-0)}K_{T}$
>
> $S(0) =  e^{-r_{c}(T)}K_{T}$
>
> $\color{red}S(0)e^{r_{c}(T)} =  K_{T} =$ the forward price 

## Cash and carry arbitrage

we can deduct the **forward price** from two arbitrage strategies.

- cash and carry arbitrage
- reverse cash and carry arbitrage

This is sa more direct argument then applying the law of one price and replication in the previous chapter.

The formula we derived was:

$K_{T} = e^{r_c{T}}S(0)$

> now we will derive the forward price from a direct arbitrage argument.

we need to show that:

$K_{T} < e^{r_c{T}}S(0) \lor K_{T} > e^{r_c{T}}S(0)$

leads to arbitrage. Thus we need to prove the forward price is as given above.

### constructing an arbitrage portfolio

#### ***suppose forward contract price is overpriced***

Suppose: $K_{T} > e^{r_c{T}}S(0)$

take a short position because we are expecting a price decrease. our contracted forward price is overpriced.

we will borrow $S(0)$ at risk free rate and use this money to purchase the underlying asset.

Our portfolio consists of:

- the short forward position
- the underlying asset
- a debt of $S(0)e^{rt}$ at time $t$

We will hold this portfolio until time $T$

At time $T$ we will provide the underlying to the long position holder for the contract price $K_{T}$.

with these proceeds we can close our debt of $S(0)e^{rT}$.

This will net us a profit given that.

$K_{T}-S(0)e^{rT}>0$

> this is arbitrage as it costs us nothing to enter into the portfolio but it will net us a certain profit. This strategy is **cash and carry arbitrage**

---

#### ***suppose forward contract price is underpriced***

Suppose: $K_{T} < e^{r_c{T}}S(0)$

Take a long position because our forward contract is deemed underpriced.

We will short the underlying by borrowing it then selling it which will give us $S(0)e^{r_{c}}$ cash.

Our portfolio consists of:

- the long forward position
- the short position in the underlying asset
- a cash holding of $S(0)e^{rt}$ at time $t$

We will hold this portfolio until time $T$

At time $T$ we will have a cash holding $e^{r_c{T}}S(0) > K_{T}$.

With this cash we can pay $K_{T}$ which will give us the underlying which we can then use to close out our underlying short position.

This will net us a profit given that.

$S(0)e^{rT}-K_{T}>0$

> this is arbitrage as it costs us nothing to enter into the portfolio but it will net us a certain profit. This strategy is **reverse cash and carry arbitrage**

---

#### ***summary***

if we have

$K_{T} < S(0)e^{rT}$

or 

$K_{T} > S(0)e^{rT}$

there will arbitrage.

by assumptions arbitrage does not exist thus.

$K_{T} = S(0)e^{rT}$

---

**Cash and carry arbitrage**

$K_{T} > e^{r_c{T}}S(0)$

1. borrow cost of asset
2. purchase underlying with borrowed cash
3. hold asset till forward expires.

The notion of **cost of carry** is the cost to hold the asset.

in this case the only cost to hold is the finance charge so.

$\text{cost of carry} = r$

> cost of carry generally includes costs such as financing charges, storage costs, transportation costs and other holding costs. net of any income the holder of the asset receives such as dividends or convenience yields
>
> we will see more general examples of cost of carry appearing in the pricing formula for more general assets such as income bearing assets and commodities.

**Reverse Cash and carry arbitrage**

$K_{T} < e^{r_c{T}}S(0)$

Is the exact reverse of the cash and carry argument. We short the underlying. Receive the carry charge as income instead of paying it.

## forward example: zero coupon bond

example:

zero coupon bond:
- $m = 1Y$
- $r_{c} = 3.5\%$
- $S_{b}(0) = \$925$ 

what will be forward price for a 6m forward contract on this bond.

$K_{T} = S_{b}(0)e^{r(T-t)}$

$K_{T} = \$925*e^{0.035(1-0.5)} = \$941.33$

if the forward price offered is $\$950$

this means that $K_{T} > S_{b}(t)e^{r(T-t)}$

this means we should short the forward contract which means using the **cash and carry strategy**.

- borrow the money to long the underlying
- we will have the bond in possesion
- we will have debt cost

$\$925$ is borrowed this will make our debt $\$925 * e^{0.035t}$

after 6 months our debt will be 

$\$925 * e^{0.035*0.5}=\$941.33$

we can close our short position by selling at $K_{T}$ which will then let us close out our debt too.

$\$950 - \$941.33 = \$8.67$ will be our certain profit

--- 

imagine the second dealer offers a forward price of $\$935$

$\$935 < \$941.33$

$K_{T} < S_{b}(0)e^{r_{c}*(T-t)}$

we want to take a long position on this forward contract

this means:

- short the underlying asset
- a cash investemnt of $\$925e^{0.035t}$ at time t

cash will be worth $925*e^{0.035(0.5)} = \$ 941.33$

given our cash we can now buy the bond for $K_{T}$ so that we can close our short position and end up with a net profit of.

$\$941.33 - \$935 = \$6.33$

## Forward examples: A stock

suppose we want to buy a stock for which $S_{s}(0)=\$150$. The stock is to be bought in 9 months when funds are available. Therefore a forward contract is preferred. The risk free rate is $r = 4\%$. What is the forward price?

$K_{T} = \$150*e^{0.04(\frac{9}{12})} = \$154.57$

What is the value of the forward contract in 3 months if the stock is now trading at $\$130$ has the position lost or gained value? What if the stock where instead trading for $\$170$

$V(0.25) = S(0.25) - e^{r_c(T-t)}K_{T}$

$V(0.25) = 130 - e^{r_c(0.75-0.25)}(154.57)$

$V(0.25) = -\$ 21.51$

the negative value shows that the long position is now losing money

---

$V(0.25) = S(0.25) - e^{r_c(T-t)}K_{T}$

$V(0.25) = 170 - e^{r_c(0.75-0.25)}(154.57)$

$V(0.25) = $\$18.49$ 

the positive value shows that the long position is now gaining money

## Forwards on assets paying a known income

so far we have only considered forward contracts for underlying assets that bear no income to the holder.

this means that assets like coupon bearing bonds or dividend paying stocks were excluded

now we will consider these assets:

- the asset pays a known income for the life of the forward contract
- the asset pays a know dividend yield

### case 1: Known income

$I$ = the present value, at the inception of the contract (t=0), of the known income paid by the contract.

then considering arbitrage the forward contract price must be the following.

$\color{red}K_{T}=(S(0) - I) e^{r_cT}$

we will establish this connection directly using **(reverse) cash and carry strategy**

> more generally we can denote $I(t)$ the present value at time $t$ of the income provided by the asset between $t$ and $T$

#### ***short position position arbitrage***

Suppose: $K_{T}>(S(0)-I)e^{r_cT}$

Strategy:

- take a short position in the forward contract
- take a long position in the underlying
- take on $S(0)$ debt which will have value $S(0)e^{r_ct}$ at time $t$ 

this portfolio will be held till $T$. at that time the following happens:

- the income accrued by the asset will be $Ie^{r_cT}$
- we get the value $K_{T}$ by selling the underlying
- we use our $K_{T}$ value to pay off our debt $S(0)e^{r_ct}$
- our total cash will be $K_{T}+ Ie^{r_cT}$

our portfolio consists of

- a short position in the forward contract
- a debt of $S(0)e^{r_ct}$
- the underlying
- a cash holding of $Ie^{r_cT}$

our inequality can be written as

$K_{T} + Ie^{r_cT} > S(0)e^{r_cT}$


#### ***long position arbitrage***

Suppose: $K_{T}<(S(0)-I)e^{r_cT}$

Strategy:

- take a long position on the forward contract
- short the underlying
- there is cash holding valued at $S(0)e^{rt}$ at time $t$

Holding this portfolio until time $T$

$K_{T} + Ie^{r_cT} < S(0)e^{r_cT}$

we have enough cash to:

- with our cash we can close our long position on the forward contract and use this asset to cloase our short position on the underlying.
- pay the future value of accrued income $Ie^{rT}$ which is owed to the asset's owner

so these actions will net us a profit:

$S(0)e^{rT} - K_{T} -Ie^{r_cT} > 0$

## Forward valuation with known income

our olf formula for forward contract value.

$V(t) = S(t) - K_{T}e^{-r(T-t)}$

we can extend our notation to 

$V(t; K, T)$

which shows dependency on the forward price ($K$) and the expiration date ($T$)

$K_{T}(t)$ = fair forward price for forwards expiring at time $T$ that prevails in the market at time $t$

which means $K_{T}(t)$ is exactly the forward price such that 

$V(t; K, T) = 0$

> note that previously we computed $K_{T}(t)$ by doing $K_{T}(0) = K_{T}$

So far we have seen for an underlying paying no income 

$K_{T} = S(t)e^{r(T-t)}$

and for underlying paying an income

$K_{T} = (S(t) - I(t))e^{r(T-t)}$

> in our examination of future contracts this notation will be used to denote the prevailing market future price, which does not equal the forward price

## Forward on asset paying a known yield